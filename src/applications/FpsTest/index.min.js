'use strict';(async()=>{CanvasRenderingContext2D.prototype.circle=function(x,y,r,fillStyle){this.beginPath();this.arc(x,y,r,0,2*Math.PI,false);if(fillStyle)this.fillStyle=fillStyle;this.fill()};namespace`core.ui`(class Planet{constructor(center,radius,orbitRadius,velocity,color){this.center=center;this.x=center.x+orbitRadius;this.y=center.y;this.lastX=this.x;this.lastY=this.y;this.radius=radius;this.orbitRadius=orbitRadius||0;this.velocity=velocity||0;this.theta=0;this.color=color||"black"}onUpdate(delta){this.lastX=
this.x;this.lastY=this.y;this.theta+=this.velocity*delta;this.x=this.center.x+Math.cos(this.theta)*this.orbitRadius;this.y=this.center.y+Math.sin(this.theta)*this.orbitRadius}onDraw(interpolationPercentage,context){var x=this.lastX+(this.x-this.lastX)*interpolationPercentage,y=this.lastY+(this.y-this.lastY)*interpolationPercentage;context.circle(x,y,this.radius,this.color)}});namespace`applications`(class FpsTest extends World{constructor(element){super(element)}async onConnected(){await super.onConnected();
this.canvas=this.querySelector("#canvas");this.context=this.canvas.getContext("2d");this.fpsCounter=this.querySelector("#fpscounter");this.fpsValue=this.querySelector("#fpsvalue");this.fps=this.querySelector("#fps");this.fps.addEventListener("input",(e)=>this.onShowFPS(e));this.fps.addEventListener("change",(e)=>this.onUpdateFPS(e));this.canvas.width=window.innerWidth;this.canvas.height=window.innerHeight;var smallerDimension=Math.min(window.innerWidth,window.innerHeight),earthOrbitRadius=smallerDimension*
.38,moonOrbitRadius=smallerDimension*.1,moonRadius=smallerDimension*.01,moon2Radius=smallerDimension*.04,sunRadius=earthOrbitRadius*.5,earthRadius=earthOrbitRadius*.15,sun=new core.ui.Planet({x:this.canvas.width*.5,y:this.canvas.height*.5},sunRadius,0,0,"#FFD000"),earth=new core.ui.Planet(sun,earthRadius,earthOrbitRadius,.03*Math.PI/180,"blue"),moon=new core.ui.Planet(earth,moonRadius,moonOrbitRadius,.1*Math.PI/180,"gray"),moon2=new core.ui.Planet(moon,moon2Radius,moonOrbitRadius,.3*Math.PI/180,"gray");
window.sprites.push(sun);window.sprites.push(earth);window.sprites.push(moon);window.sprites.push(moon2)}onShowFPS(e){this.fpsValue.textContent=Math.round(e.target.value)}onUpdateFPS(e){var val=parseInt(e.target.value,10);MainLoop.setMaxAllowedFPS(val===60?Infinity:val)}onEnd(fps,panic){super.onEnd(fps,panic);if(this.fpsCounter)this.fpsCounter.textContent=Math.round(fps)+" FPS"}})})();
